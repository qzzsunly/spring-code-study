# Bean 工厂相关
## BeanFactory
![](.常用接口_images/59e2e5d2.png)
这个接口是访问Spring bean 容器的顶层接口。实现类会持有一些bean定义，每一个都有唯一的名称。根据bean定义，这个工厂将返回一个独立的（原型设计模式），或者是一个共享的实例(单例模式的强力替代品，实例在工厂的生存周期内是一个单例),返回的实例类型取决于工厂配置。

这种方式的要点是BeanFactory是应用程序组件的注册中心，并集中配置应用的组件(例如，单个对象不再需要读取配置文件)。
### ListableBeanFactory
继承自`BeanFactory`, 这个接口的用途是枚举所有bean 实例，而不是客户端通过名称一个个查找。
### HierarchicalBeanFactory
这个接口用来实现工厂的继承关系，
### AutowireCapableBeanFactory
此工厂提供bean自动注入功能。
### ConfigurableBeanFactory
提供配置bean工厂的功能，但是此工厂一般是框架内部使用。
### ConfigurableListableBeanFactory
提供分析和修改bean定义和预初始化单例bean的功能。

## ConversionService
用于类型转换的服务接口。这是转换系统的入口点。调用`convert(Object, Class)`方法来使用此系统执行线程安全类型转换

## AliasRegistry
用来注册别名的顶层接口

### BeanDefinitionRegistry
用来注册bean 定义

# 应用上下文相关
## ApplicationContext
![](.常用接口_images/990d4ca9.png)

此接口用来为应用程序提供配置。在应用运行过程中，配置应该是只读的，但是可以根据实现类来实现重新加载。

`ApplicationContext` 提供：
- 访问应用组件的工厂方法，从`ListableBeanFactory` 接口继承而来。
- 通用的方式加载资源文件，从`ResourceLoader`接口继承而来。
- 向注册的监听器发布事件。从`ApplicationEventPublisher`接口继承而来。
- 转换消息，并支持国际化，从`MessageSource`接口继承而来。
- 继承父级上下文能力。后代上下文中的定义将保持优先。这意味着，比如说一个父上下文可以被整个web应用访问，然而每个servlet有它自己的子类上下文，这个上下文是和别的servlet隔离的。
### ConfigurableApplicationContext
此接口提供配置应用上下文的方法

## AttributeAccessor
该接口定义用于向任意对象设置和访问元数据的通用协议。

### BeanDefinition
bean定义描述了一个bean实例的属性值、构造函数参数值和由具体实现提供的进一步信息。
这只是一个最小的接口:主要目的是允许`BeanFactoryPostProcessor`(如`PropertyPlaceholderConfigurer`)反省和修改属性值和bean其他的元数据

### AnnotatedBeanDefinition
bean定义的扩展接口，它暴露`AnnotationMetadata`的bean 类型——而不需要加载该类。

# 类型元数据相关
## ClassMetadata
该接口定义特定类的抽象元数据，不需要加载该类。

## AnnotatedTypeMetadata
定义对特定类型(类`AnnotationMetadata`或方法`MethodMetadata`)的注解的访问，其方式不一定需要加载类

## AnnotationMetadata
定义访问特定类型注解的方式

## MethodMetadata

## MetadataReader
用于访问类元数据的简单门面，由ASM`org.springframework.asm.ClassReader`类实现

## ResourceLoader
加载资源的策略接口(例如类路径或文件系统资源)。`org.springframework.context.ApplicationContext`需要提供此功能，以及扩展`org.springframework.core.io.support.ResourcePatternResolver`支持。

`DefaultResourceLoader`是一个独立的实现，可以在`ApplicationContext`之外使用，也可以由`ResourceEditor`使用。

当在`ApplicationContext`中使用时，可以使用特定上下文的资源加载策略从字符串填充Resource类型和Resource数组的Bean属性


### ResourcePatternResolver
用于将位置模式(例如，ant样式的路径模式)解析为资源对象的策略接口。

这是`ResourceLoader`接口的扩展。可以检查传入的ResourceLoader(比如在容器中运行时，通过`org.springframework.context.ResourceLoaderAware`)是否也实现了这个扩展接口。

`PathMatchingResourcePatternResolver`是一个独立的实现，可以在`ApplicationContext`之外使用，`ResourceArrayPropertyEditor`也使用它来填充bean的资源数组属性。

可以与任何类型的位置模式(例如`/WEB-INF/*-context.xml`):输入模式必须匹配策略实现。这个接口只指定转换方法，而不是特定的模式格式。

这个接口还为类路径中所有匹配的资源提供了一个新的资源前缀`classpath*:`。注意，在这种情况下，资源位置应该是一个没有占位符的路径(例如`/beans.xml`); JAR文件或类目录可以包含多个同名文件

## MessageSource
用于解析消息的策略接口，支持此类消息的参数化和国际化。
Spring为生产提供了两种开箱即用的实现:
- `org.springframework.context.support.ResourceBundleMessageSource`, 基于`java.util.ResourceBundle`
- `org.springframework.context.support.ReloadableResourceBundleMessageSource` , 不重启的情况下重新加载消息定义

### HierarchicalMessageSource
继承自`MessageSource`, 体现层次结构

## ApplicationEventPublisher
封装事件发布功能。作为ApplicationContext的顶级接口

## EnvironmentCapable

## PropertyResolver

### Environment

### ConfigurableEnvironment

### ConfigurablePropertyResolver

### ConfigurableEnvironment

#xml 解析相关
## NamespaceHandler
`DefaultBeanDefinitionDocumentReader`使用的基本接口，用于处理Spring XML配置文件中的自定义名称空间。

实现类将返回用于自定义顶级标签的`BeanDefinitionParser`接口的实现，以及用于自定义嵌套标签的`BeanDefinitionDecorator`接口的实现。

解析器将在遇到`<beans>`标签下的自定义标签时调用`parse`方法，并在遇到`<bean>`标签下的自定义标签时进行调用`decorate`方法。

编写自己的自定义元素扩展时通常不需要直接实现这个接口，而是使用提供的`NamespaceHandlerSupport`类

## NamespaceHandlerResolver
`DefaultBeanDefinitionDocumentReader`用这个接口为特定名称空间URI定位`NamespaceHandler`实现类

## BeanDefinitionParser
`DefaultBeanDefinitionDocumentReader`用来处理自定义顶级(直接位于`<beans/>`下)标签的接口。

实现类可以根据需要自由地将自定义标记中的元数据转换成任意多的`BeanDefinition`。

解析器从相关联的`NamespaceHandler`中为自定义标记所在的命名空间定位一个`BeanDefinitionParser`

## BeanDefinitionDecorator

## BeanFactoryPostProcessor

## BeanPostProcessor

## DestructionAwareBeanPostProcessor 

## InstantiationAwareBeanPostProcessor

## SmartInstantiationAwareBeanPostProcessor

## MergedBeanDefinitionPostProcessor

## BeanDefinitionReader

## BeanDefinitionDocumentReader